#!/usr/bin/python3# -*- coding: utf-8 -*-# @Time    : 2019-08-19 21:34# @Author  : Tanheyi# @Email   : Tanheyii@gamil.com# @File    : context_processors.py# @Software: PyCharmfrom blog import modelsfrom utils.pagination import Paginationfrom django.db.models import Countdef new_cate_blog_info(request):    current_page = int(request.GET.get('page', 1))    total_count = models.Blog.objects.count()    page_obj = Pagination(current_page, total_count, request.path_info)    data = models.Blog.objects.all()[page_obj.start:page_obj.end]    new_blog = models.Blog.objects.all()[:5]    all_cates = models.Cate.objects.all().annotate(sum_num=Count('blog'))    return {        'all_blog': data,        'all_cates': all_cates,        'new_blog': new_blog    }